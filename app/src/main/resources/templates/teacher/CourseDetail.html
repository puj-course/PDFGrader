<!doctype html>
<html>
<head><meta charset="utf-8"><title>Detalle curso</title><meta name="viewport" content="width=device-width, initial-scale=1"/></head>
<body>
<h2 th:text="${course.code} + ' - ' + ${course.name}"></h2>

<h3>Alumnos inscritos</h3>
<ul>
    <li th:each="s : ${students}" th:text="${s.fullName} + ' (' + ${s.email} + ')'"></li>
    <li th:if="${#lists.isEmpty(students)}">Sin alumnos</li>
</ul>

<h3>Tareas</h3>
<ul>
    <li th:each="a : ${assignments}">
        <a th:href="@{|/teacher/assignment/${a.id}|}" th:text="${a.title}"></a>
        (<span th:text="${a.dueAt}"></span>)
    </li>
    <li th:if="${#lists.isEmpty(assignments)}">Sin tareas aún</li>
</ul>

<hr/>
<h3>Subir Temario (PDF)</h3>
<form th:action="@{/teacher/upload-syllabus}" method="post" enctype="multipart/form-data">
    <input type="hidden" name="courseId" th:value="${course.id}"/>
    <label>Versión</label><br/>
    <input type="number" name="version" required/><br/>
    <label>Título</label><br/>
    <input type="text" name="title"/><br/>
    <label>PDF</label><br/>
    <input type="file" name="file" accept="application/pdf" required/><br/><br/>
    <button type="submit">Subir temario</button>
</form>

<h4>Temarios existentes</h4>
<ul>
    <li th:each="sy : ${syllabi}" th:text="'v'+${sy.version} + (sy.title!=null?(' - '+sy.title):'')"></li>
    <li th:if="${#lists.isEmpty(syllabi)}">Sin temarios</li>
</ul>

<hr/>
<h3>Subir Rúbrica (PDF)</h3>
<form th:action="@{/teacher/upload-rubric}" method="post" enctype="multipart/form-data">
    <input type="hidden" name="courseId" th:value="${course.id}"/>
    <label>Nombre</label><br/>
    <input type="text" name="name" required/><br/>
    <label>Versión</label><br/>
    <input type="number" name="version" required/><br/>
    <label>PDF</label><br/>
    <input type="file" name="file" accept="application/pdf" required/><br/><br/>
    <button type="submit">Subir rúbrica</button>
</form>

<h4>Rúbricas existentes</h4>
<ul>
    <li th:each="rb : ${rubrics}" th:text="${rb.name} + ' v' + ${rb.version}"></li>
    <li th:if="${#lists.isEmpty(rubrics)}">Sin rúbricas</li>
</ul>

<hr/>
<h3>Crear tarea</h3>
<form th:action="@{|/teacher/course/${course.id}/assignment|}" method="post" th:object="${form}">
    <label>Título</label><br/>
    <input type="text" th:field="*{title}" required/><br/>
    <label>Descripción</label><br/>
    <textarea th:field="*{description}"></textarea><br/>
    <label>Fecha límite</label><br/>
    <input type="datetime-local" th:field="*{dueAt}"/><br/>
    <label>Rúbrica</label><br/>
    <select th:field="*{rubricId}" required>
        <option th:each="rb : ${rubrics}" th:value="${rb.id}" th:text="${rb.name} + ' v' + ${rb.version}"></option>
    </select><br/>
    <label>Temario (opcional)</label><br/>
    <select th:field="*{syllabusId}">
        <option value="">-- ninguno --</option>
        <option th:each="sy : ${syllabi}" th:value="${sy.id}" th:text="'v'+${sy.version} + (sy.title!=null?(' - '+sy.title):'')"></option>
    </select><br/><br/>
    <button type="submit">Crear tarea</button>
</form>

<p><a th:href="@{/teacher/portal}">Volver al portal</a></p>
</body>
</html>
